## Kafka와 같은 message queue를 이용한 MSA에서의 이점

* 비동기(async)
  * Kafka는 마이크로 서비스 간의 비동기 통신을 쉽게 구현할 수 있음.
  * 서비스가 응답을 기다리지 않고 서로 통신할 수 있다.
  * 시스템의 전반적인 성능과 응답성을 개선하는 데 도움이 됨.


* 디커플링(decoupling)
  * Kafka를 메시지 queue로 사용하면 서비스를 서로 분리하는 데 도움이 된다.
  * 각 서비스는 Kafka에 메시지를 보내고 다른 서비스는 Producer와 관계없이 해당 메시지를 사용할 수 있음.
  * 시스템의 전반적인 모듈성 및 유지보수성을 개선하는 데 도움이 됨.


* 확장성(scalability)
  * Kafka는 시스템의 확장성을 개선하는 데 도움이 된다.
  * 서비스의 여러 인스턴스는 동일한 Kafka 토픽의 메시지를 사용할 수 있으므로 워크로드 분산 및 성능 향상에 도움이 됨.


* 회복 탄력성(Resilience)
  * Kafka의 falut-tolerance 및 replication 기능으로 시스템의 Resilience를 개선할 수 있음.
  * 서비스가 다운되면 Kafka는 서비스가 다시 온라인 상태가 될 때까지 메시지를 계속 저장할 수 있고, 다른 서버의 상태 이상이 전파되지 않음.
  * KAFKA가 Circuit breaker 역할을 대체해줌.(필요 없게 된다고 보는게 맞을 듯)


* 이벤트 기반(Event driven)
  * Kafka를 메시지 브로커로 사용하면 이벤트 기반 아키텍처를 쉽게 구현할 수 있음.
  * 서비스는 Kafka에 이벤트를 produce 하고 다른 서비스는 해당 이벤트를 consume해 동작.
  * 시스템의 전반적인 유연성과 적응성을 개선하는 데 도움이 된다.


전반적으로 보면 QUEUE를 사용함으로써 MSA의 이점인 Flexibility, Scalability, Agility를 더욱 강화해주는 이점이 있음.


## 단점
* 기존 API 통신에 비해 추가 설정 및 구성이 필요함.
* Kafka 자체가 러닝 커브가 됨.
* 전체 시스템 성능을 향상시킬 수 있지만 메시지 serialize / deserialize 및 네트워크 전송으로 인해 추가 오버헤드가 발생할 수도 있음
* Kafka와 같은 분산 queue는 지속적인 유지 관리가 필요하므로 시스템 운영 비용이 추가된다.
* 서비스가 다른 서비스에서 메시지를 처리할 때까지 기다려야 하는 경우 우선순위에 대한 처리가 필요할 수 있음.(복잡)


## Conclusion
* Kafka를 사용하는 장단점을 비교하여 판단해야함.
* 언제 사용하면 좋을까?
  * 서버 간 통신이 빈번한 경우
  * 서버 간 scail의 차이가 클 경우
  * ...