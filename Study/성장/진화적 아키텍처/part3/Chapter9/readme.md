# 아키텍처 실천
## 9.1 조직적 요인
* 소프트웨어 아키텍처는 소프트웨어와 관련이 없는 다양한 요소(팀 구조, 예산)에 걸쳐 광범위한 영향력을 펼친다

### 9.1.1 콘웨이의 법칙
* 사회적인 구조, 특히 사람들 사이의 의사소통 경로가 최종 제품 설계에 영향을 미친다
* 설계 초기는 각 책임 영역이 나뉘어지는 패턴을 깊이 이해하는 단계다
* 이 과정에서 집단이 문제를 나누는 방식은 향후 집단의 선택에 영향을 미친다
  * 하나의 큰 문제를 작게 나누어 위임하면 각각을 조정하는 문제가 다시 발생한다
  * 예를 들어 계층 아키텍처는 ui / business logic 등의 기술적 기능을 기준으로 계층을 나눈다
  * 이 구조에서 여러 계층을 관통하는 공통 요건을 처리하면 오히려 조정 오버헤드가 발생한다
    * 일반적인 계층형 팀 구조는 기술 계층과 아키텍처 계층이 유사할 경우 잘 동작하지만
    * 여기서 도메인 중심의 마이크로 서비스 구조의 아키텍처를 사용할 경우 오버헤드가 발생하게 된다
* `위임 영역이 분할되고 담당 범위가 좁아질 때마다 효과적인 설계 대안은 줄어든다`
* 작업을 분할하는 방식과 위임 범위를 항상 고민하고, 아키텍처의 목표와 팀 구조를 일치시키기 위해 노력해야 한다
* 이런 면에서 서비스 경계는 팀을 나누는 이상적인 기준이 된다
* 도메인을 중심으로 구성된 팀은 기술 중심 팀보다 진화적 아키텍처를 구현하기 유리하다

**교차기능팀(Cross functional team)**
* 도메인 중심 팀은 교차기능 팀인 경우가 많다
* 한 팀의 구성원만으로 제품의 모든 영역을 아우를 수 있다(PM / 기획 / 개발 / 운영)
* 이러한 팀에 포함된 각각의 역할을 알아보자
* 아키텍처
  * 아키텍처는 증분 변경을 방해하는 부적절한 커플링을 제거해야 한다
* 비즈니스 분석가
  * 도메인 영역의 복잡도가 높은 제품은 비즈니스 규칙, 설정, 제품 이력 등의 특성도복잡하고, 이런 제품은 BA의 조선이 반드시 필요한 전문 영역이다
* 데이터 팀
* 개발자
  * 풀스택!?
* 디자이너
  * 사용자와 대면하는 기능을 담당하며 일관적 인터페이스를 위해 다른 교차기능팀의 디자이너와 소통할 필요가 있다
* 운영
  * 전통적 조직에서 서비스 분할과 독립적 배포는 매우 어려운 과제다
  * 운영 프로세스가 성공적으로 안착하려면 시스템 프로비저닝, 배포 등의 자동화된 데브옵스 관행이 반드시 필요하다
* 제품 관리자(PM)
  * 고객의 니즈와 비즈니스 성과를 우선시한다
* 테스트
  * 테스터는 도메인 간 통합 테스트를 담당한다

* 교차기능팀의 목표 중 하나는 팀 조정 과정의 마찰을 근절하는 것이다
* 교차기능팀을 만들 자원이 없다면 한명이 여러개의 교차기능팀을 맡는다
  * > 그러면 되는건가? 그냥 안되는걸 억지로 하는것 아닌가?
* 교차기능팀의 구성원은 사일로 너머를 손가락질로 가리킬 필요가 없다
> 이런 형태의 조직인 회사가 있는지?
> 
> 서비스의 성공이 전체 조직의 성과로 이루어지지 않는다면(내부에서 다시 차등을 나눈다면) 무의미해지지 않을까? 하는 우려

**비즈니스 기능 중심 팀 구성**
* 도메인을 중심으로 팀을 구성하는 것은 비즈니스 기능을 중심으로 팀이 구성될 것임을 암시한다
* 기술 아키텍처가 고유한 복잡도와 추상화를 추구하는 한편 비즈니스 동작과는 느슨한 관계를 유지하기 바란다
* 이것은 전통적으로 아키텍트가 기능 위주로 아키텍처를 분할했기 때문이다
  * > 도메인 중심이라면 비즈니스 동작과 밀접해도 된다는 의미로 봐도 될지

**비즈니스 기능과 인지 부하의 균형**
* 스트림 정렬팀 : 도메인의 작업 흐름과 일치하는 팀
* 활성화팀 : 스트림 정렬팀에 새로운 기술/기법 습득을 지원하는 팀
* 난해한 하위시스템팀 : 도메인 최하단의 수학/계산/기술 분야를 담당하는 팀
* 플랫폼팀 : 스트림 정렬팀의 업무 속도를 가속시키기 위해 강력한 내부 도구를 생산하고 지원하는 팀
> 이 경우 보상은 스트림 / 난해한 하위시스템팀 으로 몰릴것 같음

**프로젝트를 넘어 제품으로**
* 전통적으로 소프트웨어 개발은 문제를 식별하고 개발팀을 구성하고 `완료`되면 프로젝트는 운영팀에 전달되고 유지보수 속에서 남은 여행을 보낸다
* 개발팀은 다음 문제를 해결하러 떠난다
* 여기서 발생하는 문제
  * 원래의 개발팀이 이동했기 때문에 유지 보수가 어려워진다
  * 개발자가 운영 업무로부터 격리되어 코드 품질을 등한시하기 쉽다
  * 프로젝트는 시간적 함의를 내포하므로 언젠가 종료된다는 인식이 있고 이것은 의사 결정에 영향을 미친다
* 이것을 프로젝트가 아닌 제품으로 인식한다면
  * 수명 주기가 없어진다
  * 제품의 소유자가 발생한다, 가치를 옹호하고 요구 사항을 반영할 수 있게 된다
  * 각 역할(PM, BA, 디자이너, 개발자..)의 역할이 뚜렷해진다

**과도한 팀 규모 지양**
* 사람이 많아지면 단순히 N배 증가하는 것이 아니라 N(N-1)/2 만큼 의사소통을 위한 연결이 늘어나고 마찰이 강해진다

### 9.1.2 문화
* 아키텍트는 엔지니어의 시스템 구축 과정을 살피고 조직의 보상 행동에 관심을 기울여야 한다
* 아키텍트가 도구를 선택하고 설계를 추진하는 의사 결정 과정은 소프트웨어가 진화를 감당하는 능력에 영향을 미친다
* 스스로 질문에 답하며 팀의 엔지니어링 문화를 이해해야 한다
  * 팀 구성원이 피트니스 함수를 알고 새로운 도구나 제품이 피트니스 함수 제작 역량에 미치는 영향을 고려하고 있는가? △
  * 피트니스 함수를 정의하고 시스템이 이를 얼마나 준수하고 있는지 측정하고 있는가? △
  * 응집도, 커플링, 동조성을 엔지니어가 이해하고 있는가? △
  * 도메인과 어울리는 기술 개념에 대해 대화를 나누고 있는가? O
  * 배우고 싶은 기술이 아닌, 변화에 적응하는 능력을 기준으로 솔루션을 선택하고 있는가? O
  * 비즈니스 변화에 팀은 어떻게 대응하고 있는가? 사소한 비즈니스 변화도 통합하기 어려워하거나 너무 많은 시간을 소비하지 않는가? O
* 팀은 주로 신기능 개발에 매진하며 보상 또한 이 분야에 집중된다.
* 코드 품질과 진화성은 의식적으로 우선시하지 않으면 간과될 가능성이 높다
* 진화적 아키텍처를 추구하는 아키텍트는 진화성을 높이는 설계를 우선시하는 팀에 주목하고 다른 팀에도 장려할 방법을 강구해야 한다

### 9.1.3 실험 문화
* 진화가 성공하려면 실험이 뒷받침 되어야 한다
* 실험이란 소소하지만 새로운 아이디어를 정기적으로 시도하는 활동이다
* 실험을 장려할 수 있는 방법을 알아보자
  * 외부 아이디어 도입
    * 외부 컨퍼런스를 통해 직원들이 새로운 기술, 도구, 접근 방식을 습득하도록 장려한다
  * 명시적 개선 장려
    * 도요타의 카이젠 문화, 모든 인원, 특히 문제와 가장 가깝거나 권한이 있는 인원은 지속적으로 개선을 추구해야 한다
  * 스파이크 구현 및 안정화
    * 스파이크 솔루션 : 난해한 기술 문제 학습, 미지의 영역 탐색, 예측 정확도 향상 등을 목표로 일회성 솔루션을 제작하는 XP 기법
    * 품질을 포기하고 학습 속도를 올린다. 우수한 설계가 아닌 빠른 학습속도에 중점을 둔다
  * 혁신 시간 확보
  * 집합 기반 개발
    * 다양한 접근 방법 탐색에 중점
    * 여러 조건을 탐색하는 과정에서 문제를 더 잘 이해하고 실질적 제약 조건이 드러난다
    * 짧은 시간 동안 여러 방식으로 프로토타입으 제작하고 상세한 데이터와 경험을 얻는다
  * 엔지니어와 최종 사용자 연결
    * 실험을 정확하게 하려면 작업의 영향력을 이해해야 한다
    * A/B 테스트, 파견(?)

### 9.1.4 CFO와 예산
* 전통적으로 예산을 책정하기 위해 소프트웨어 개발 생태계의 장기적 추세를 예측할 수 있어야 했지만 지금은 그렇지 않다
* 아키텍처 퀀텀의 수가 증가할수록 퀀텀당 비용은 적정 지점을 향해 하강한다
  * > 출처가 없음
* 퀀텀의 수가 증가할 때 비용이 감수하는 이유
  * 구성하는 요소가 작아지므로 관심사가 명확하게 분리 및 정의된다(불필요한 오버헤드 없어짐)
  * 퀀텀 수가 늘어날수록 운영은 자동화 되기 때문
* 그러나 퀀텀이 지나치게 작아지면 퀀텀의 규모 자체가 비용을 유발하기 시작함
* 아키텍트는 퀀텀 크기와 비용 사이에서 적정 지점을 찾아야 한다
  * 그리고 이것은 기업이 상대하는 시장에 차이가 있다
* 현대의 아키텍트는 진화적 시스템의 특성과 내재적 불확실성을 먼저 이해해야 한다

## 9.2 비즈니스 사례
* 지금까지 배운 맣은 사례들이 실질적인 비즈니스 가치를 만들지 못한다면 불필요한 메타워크가 될 뿐이다
* 아키텍트는 비즈니스 이해관계자가 이해하고 받아들일 수 있는 언어를 이용해 아키텍처의 개념을 설명할 수 있다
  * 예를 들면 A/B 테스트

### 9.2.1 가설 주도 개발 및 데이터 주도 개발
* 데이터 주도 개발은 데이터를 중심으로 기술적 변화를 도모하는 개발 방법론이다
* 가설 주도 개발은 기술 측면의 관심사 대신 비즈니스를 통합한다 - ?
* 