# 2장. 개략적인 규모 추정
## 2의 제곱수
...
## 모든 프로그래머가 알아야 하는 응답지연 값
| 연산명                        | 시간                      |
|----------------------------|-------------------------|
| L1 캐시 참조                   | 0.5 ns                  |
| 분기 예측 오류                   | 5 ns                    |
| L2 캐시 참조                   | 7 ns                    |
| 뮤텍스 락                      | 100 ns                  |
| 주 메모리 참조                   | 100 ns                  |
| Zippy로 1 KB 압축             | 10,000 ns = 1 μs        |
| 1 Gbps 2KB 전송              | 20,000 ns = 2 μs        |
| 메모리 1MB sequential read    | 250,000 ns = 250 μs     |
| 데이터 센터 내의 왕복 지연            | 500,000 ns = 500 μs     |
| 디스크 탐색(seek)               | 10,000,000 ns = 10 ms   |
| 네트워크에서 1MB sequential read | 10,000,000 ns = 10 ms   |
| 디스크에서 1MB sequential read  | 30,000,000 ns = 30 ms   |
| CA -> NE 까지 왕복 지연 시간       | 150,000,000 ns = 150 ms |

* 값은 기술의 발전에 따라 달라질 수 있으나 순서와 비례는 일반적으로 크게 변하지 않음
  * 메모리는 빠르고 디스크는 아직도 느리다
  * 디스크 Seek은 가능한 하지 말자
  * 단순한 압축 알고리즘은 빠름
  * 전송하기전에 가능하면 압축
  * 데이터 센터간 이동은 느리다

## 가용성에 관계된 수치들
* 고가용성은 시스템이 중단없이 운영될 수 있는 능력
* 클라우드 사업자는 99% 이상의 고가용성을 제공
  * ex) AWS S3는 99.99%의 가용성 제공, 계산식에 따르면 1년에 1시간 미만의 장애시간을 가진다

## 예제: 트위터 QPS와 저장소 요구량 추정
* 가정
  * MAU는 3억
  * 50%의 사용자는 매일 사용
  * 사용자별 평균 2건의 트윗
  * 미디어가 있는 트윗은 10%
  * 데이터는 5년간 보관
* QPS 추정
  * DAU = 3억 * 50% = 1.5억
  * QPS = 1.5억 * 2(트윗) / 86500초 = 3500
  * Peek QPS = 2 * QPS = 7000
* 트윗 평균 크기
  * ID 64 byte + text 140 byte = 204 byte
  * 3억개의 트윗중 10% 3천만개에 1MB의 미디어 첨부
  * 204 * 3억 + 1MB * 3천만 = 30 TB
  * 일 30 TB * 5년 = 55PB

> 시스템 설계에서 성능은 숫자로 이루어진 요구사항이며 명확한 지표가 된다
