# 코드 품질
### 코드 품질이 중요한 이유
|   | 고품질 코드 | 저품질 코드 |
|---|---|---|
| 최초 요구 사항 | 완전하게 충족 | 경계 조건을 처리하지 못하기 때문에 완전하게 충족하지 못함 |
| 요구 사항 변화 | 사소한 추가 작업 필요 | 대규모의 코드 변경 및 리팩터링 필요 |
| 오류 발생 시 | 시스템이 복구되거나 부분적으로 작동 | 시스템은 미리 정의되지 않은 상태에 놓이고 데이터는 손상될 가능성이 있음 |
| 처음 접하는 상황 | 명백히 예상되지 않은 상황도 처리 | 시스템은 미리 정의되지 않은 상태에 놓이고 데이터는 손상될 가능성이 있음 |
| 시스템 공격 | 시스템은 안전한 상태이고 손상되지 않음 | 시스템은 미리 정의되지 않은 상태에 놓이고 손상될 가능성이 있음 |
| 결론 | 신뢰할 수 있고, 유지보수가 쉬우며 버그가 거의 없는 소프트웨어 | 신뢰할 수 없고 유지보수가 어려우며 버그가 많은 소프트웨어 | 

* 소프트웨어 개발 및 배포 프로세스
![img.png](img.png)

### 고품질의 코드가 이루고자 하는 네 가지 목표
1. 작동해야 하고
2. 작동이 멈추지 않고
3. 변화하는 요구 사항에 적응할 수 있고
   4. 요구 사항을 모두 만족해서 시장에 늦게 나가거나
   5. 일단 만들어서 시장에 나갔으나 초기 피드백 대응후 시장에 늦게 나가거나
4. 중복 기능을 만들 필요가 없다.
   5. 이미 잘 만들어져 있다면

### 고품질 코드 작성을 위한 높은 수준에서의 여섯 가지 전략
1. 코드는 읽기 쉬워야 한다.
   2. 무슨 일을 무엇을 가지고 어떻게 하면 뭐가 나오는지
2. 코드는 예측 가능해야 한다.
   3. 이름과 그에 대응하는 동작만 하자
3. 코드를 오용하기 어렵게 만들라.
   4. 인자 명확하고 필요한것만
4. 코드를 모듈화하라.
   5. 외부에 의존하지 않고 실행할 수 있도록
5. 코드를 재사용 가능하고 일반화할 수 있게 작성하라.
   6. 드릴은 벽도 뚫고 바닥도 뚫고(재사용)
   7. 드릴은 뚫기도 하고 나사를 박기도 하고(일반화)
6. 테스트가 용이한 코드를 작성하고, 제대로 테스트하라.
### 고품질 코드 작성은 일정을 지연시키는가?
* 초반에는 느릴 수 있으나 중장기적으로 보면 결국 더 빠른 경우가 많다.

# 추상화 계층
### 깔끔한 추상화 계층을 통해 문제를 하위 문제로 세분화하는 방법
```java
HttpConnection connection = HttpConnection.connect("http://example.com/server");
connection.send("Hello server");
connection.close();
```
추상화 계층 위에서 보면 매우 간단한 코드이지만 내부에서는
1. 문자열 serialize
2. Http 프로토콜의 동작
3. TCP 연결
4. 네트워크 확인
5. 데이터 -> radio frequency로 변경
6. 데이터 전송 오류 및 수정

상위 수준의 문제는 단순히 "메시지를 보낸다" 하지만 실제로는 이러한 많은 동작들이 필요함.

상위 수준에서는 Http 프로토콜이 어떻게 구현되는지 알 필요 없게 분리되어 있다.

![img_1.png](img_1.png)

### 추상화 계층이 코드 품질의 요소를 달성하는 데 어떻게 도움이 되는지
* 가독성
  * 코드의 모든 세부 사항을 이해하긴 어렵지만 한번에 다뤄야 하는 층을 한두개로 제한함으로써 가독성을 올린다.
* 모듈화
  * 하위 문제에 대한 해결책을 명확하게 분할하여 구현 세부 사항이 외부로 노출되지 않도록 보장
* 재사용성 및 일반화성
  * 추상화 계층을 통해 하위 문제에 대한 해결책을 재사용 하기 용이함.
  * 문제가 적절하게 추상화 되면 해결책이 여러 상황에서 일반화될 수 있다.    
* 테스트 용이성
  * 추상화 계층은 테스트해야할 범위를 줄여주고 동작을 명확하게 한다.
### API 및 구현 세부 사항
* 코드 호출 시 볼 수 있는 것
  * public class, interface, method
  * name, arguments, return type
* 볼 수 없는 것
  * 구현 세부 사항
* API에서 공개할 것 외에는 모두 구현 세부 사항이다.
* 코드를 하나의 API라고 생각하면 추상화 계층을 나누는데 도움이 된다.
### 함수, 클래스 및 인터페이스를 사용해 코드를 추상화 계층으로 나누는 방법
